(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/AddressEdit/AddressEdit"],{1537:function(e,t,i){},2516:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n}));var n={uniIcons:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(i.bind(null,"7eb3"))},zeroPrivacy:function(){return i.e("uni_modules/zero-privacy/components/zero-privacy/zero-privacy").then(i.bind(null,"f4c3"))}},a=function(){var e=this.$createElement;this._self._c},s=[]},3392:function(e,t,i){"use strict";var n=i("1537"),a=i.n(n);a.a},"426c":function(e,t,i){"use strict";(function(e,t){var n=i("47a9");i("7ea0");n(i("3240"));var a=n(i("73f8"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(a.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},"42e8":function(e,t,i){"use strict";i.r(t);var n=i("647e"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},"647e":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i("7dcd"),a={data:function(){return{status:!1,addressType:"",visible:!1,maskCloseAble:!0,defaultValue:"110101",column:3,ab:{name:"",phone:"",area:"",code:"",recipientName:""},recipientName:"",phone:"",area:"",id:"",onNeed:!0}},components:{cityPicker:function(){Promise.all([i.e("common/vendor"),i.e("uni_modules/piaoyi-cityPicker/components/piaoyi-cityPicker/piaoyi-cityPicker")]).then(function(){return resolve(i("c390"))}.bind(null,i)).catch(i.oe)}},onLoad:function(t){console.log("@@@@"+t),this.addressType=t.type,e.setNavigationBarTitle({title:this.addressType}),"编辑地址"==this.addressType&&(this.ab=JSON.parse(t.abInfo),this.ab.name=this.ab.province+this.ab.city+this.ab.district,this.recipientName=this.ab.recipientName,this.phone=this.ab.phoneNumber,this.area=this.ab.detailedAddress,this.defaultValue=[this.ab.province,this.ab.city,this.ab.district],this.id=this.ab.id)},methods:{handleNeedAuthorization:function(t){console.log("是否需要授权",t),t&&e.navigateBack()},handleSwitchChange:function(e){this.status=e.detail.value,console.log("Switch is changed to:",this.status)},openCp:function(){this.visible=!0},confirm:function(e){console.log(e),this.ab=e,this.visible=!1},cancel:function(){this.visible=!1},open:function(){this.$refs.popup.open("bottom")},close:function(){this.$refs.popup.close()},save:function(){if(""==this.ab.recipientName)return e.showToast({title:"请输入收货人姓名",icon:"none"}),!1;if(""==this.phone||!/^1[3-9]\d{9}$/.test(this.phone))return e.showToast({title:"请输入正确的手机号",icon:"none"}),!1;if(""==this.ab.name)return e.showToast({title:"请选择所在地区",icon:"none"}),!1;if(""==this.area)return e.showToast({title:"请输入详细地址",icon:"none"}),!1;var t=e.getStorageSync("basicData"),i=JSON.parse(t);"编辑地址"==this.addressType?(0,n.updateUserAddress)({userOpenid:i.userOpenid,recipientName:this.recipientName,phoneNumber:this.phone,province:this.ab.province||this.ab.provinceName,city:this.ab.city||this.ab.cityName,district:this.ab.areaName||this.ab.district,detailedAddress:this.area,id:this.id}).then((function(t){e.showToast({title:"保存成功",duration:2e3});var i=setInterval((function(){e.navigateBack(),clearInterval(i)}),2e3)})).catch((function(t){e.showToast({title:t.data.msg||"updateUserAddress接口异常,请稍后再试",icon:"none"})})):(0,n.createUserAddress)({userOpenid:i.userOpenid,recipientName:this.recipientName,phoneNumber:this.phone,province:this.ab.provinceName,city:this.ab.cityName,district:this.ab.areaName,detailedAddress:this.area}).then((function(t){e.showToast({title:"保存成功",duration:2e3});var i=setInterval((function(){e.navigateBack(),clearInterval(i)}),2e3)})).catch((function(t){e.showToast({title:t.data.msg||"createUserAddress接口异常,请稍后再试",icon:"none"})}))},del:function(){var t=this;e.showModal({title:"",content:"立即删除该收货地址？",confirmColor:"#C0272C",success:function(i){i.confirm?(0,n.deleteUserAddressById)({id:t.id}).then((function(t){e.showToast({title:"删除成功",duration:2e3});var i=setInterval((function(){e.navigateBack(),clearInterval(i)}),2e3)})).catch((function(t){e.showToast({title:t.data.msg||"deleteUserAddressById接口异常,请稍后再试",icon:"none"})})):i.cancel&&console.log("用户点击取消")}})}}};t.default=a}).call(this,i("df3c")["default"])},"73f8":function(e,t,i){"use strict";i.r(t);var n=i("2516"),a=i("42e8");for(var s in a)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("3392");var o=i("828b"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"1a9b8270",null,!1,n["a"],void 0);t["default"]=c.exports}},[["426c","common/runtime","common/vendor"]]]);