(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/GoodsDetails/GoodsDetails"],{"14a9":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){}));var n=function(){var e=this.$createElement;this._self._c},i=[]},"1cd5":function(e,t,o){"use strict";o.r(t);var n=o("14a9"),i=o("a848");for(var r in i)["default"].indexOf(r)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(r);o("f0b9");var a=o("828b"),c=Object(a["a"])(i["default"],n["b"],n["c"],!1,null,"070ddd7c",null,!1,n["a"],void 0);t["default"]=c.exports},"362a":function(e,t,o){"use strict";(function(e,t){var n=o("47a9");o("7ea0");n(o("3240"));var i=n(o("1cd5"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(i.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])},"8f2c":function(e,t,o){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o("7dcd"),r={components:{},data:function(){return{backgroundColor:"#ccc",swiperList:[],quantity:1,id:"",originalPrice:"",memberPrice:"",orderAmount:"",productName:"",mainImage:""}},onShow:function(){},onLoad:function(t){var o=this;console.log(t);var r="";if(1==t.isBuy){var a=e.getStorageSync("basicData"),c=JSON.parse(a);r=c.commodityCode}else{var u=decodeURIComponent(t.scene);console.log("onLoad扫码scene参数="+u),r=decodeURIComponent(t.scene).replace(/^\?code=/,"")}console.log("qrcode="+r),n.login({success:function(t){if(t.code){var n={code:t.code};(0,i.queryUserOpenid)(n).then((function(t){var n=JSON.stringify({userOpenid:t.userOpenid,commodityCode:r});e.setStorageSync("basicData",n),o.getInfo()})).catch((function(t){e.showToast({title:t.data.msg||"queryUserOpenid接口异常,请稍后再试",icon:"none"})}))}else console.log("登录失败！"+t.errMsg),e.showToast({title:"微信授权失败，请稍后重试",icon:"none"})}})},methods:{getInfo:function(){var t=this,o=e.getStorageSync("basicData"),n=JSON.parse(o);(0,i.queryCommodityByCode)({userOpenid:n.userOpenid,commodityCode:n.commodityCode}).then((function(e){console.log(e),t.originalPrice=e.originalPrice,t.memberPrice=e.memberPrice,t.orderAmount=Number(e.memberPrice).toFixed(2),t.productName=e.productName,t.id=e.id,t.mainImage=e.mainImage.url,t.swiperList=e.slideshowImages})).catch((function(t){e.showModal({title:"提示",content:t.data.msg||"queryCommodityByCode接口异常,请稍后再试",showCancel:!1})}))},imgPreview:function(t){e.previewImage({indicator:"none",loop:!1,urls:[t]})},add:function(){this.backgroundColor="#fff",this.quantity=Number(this.quantity)+1,this.orderAmount=(Number(this.quantity)*Number(this.memberPrice)).toFixed(2)},reduce:function(){if(Number(this.quantity)<=1)return e.showToast({title:"数量不能小于1",icon:"none"}),void(this.backgroundColor="#ccc");this.backgroundColor="#fff",this.quantity=Number(this.quantity)-1,this.orderAmount=(Number(this.quantity)*Number(this.memberPrice)).toFixed(2)},changeNumber:function(e){e.detail.value;this.orderAmount=(Number(this.quantity)*Number(this.memberPrice)).toFixed(2)},phonecall:function(){e.makePhoneCall({phoneNumber:"400-8877519"})},gopay:function(){var t=this;if(""!=this.quantity&&0!=Number(this.quantity)){var o=e.getStorageSync("basicData"),n=JSON.parse(o);(0,i.createOrder)({userOpenid:n.userOpenid,commodityList:[{id:this.id,quantity:this.quantity,mainImageUrl:this.mainImage}],id:this.id,orderAmount:this.orderAmount}).then((function(o){console.log("+++++++++++++"+o),e.navigateTo({url:"/pages/CashierDesk/CashierDesk?orderAmount="+t.orderAmount+"&orderNo="+o.orderNo})})).catch((function(t){e.showToast({title:t.data.msg||"createOrder接口异常,请稍后再试",icon:"none"})}))}else e.showToast({title:"数量不能小于1",icon:"none"})},gomy:function(){e.navigateTo({url:"/pages/my/my"})},gohome:function(){e.navigateTo({url:"/pages/home/home"})}}};t.default=r}).call(this,o("df3c")["default"],o("3223")["default"])},a848:function(e,t,o){"use strict";o.r(t);var n=o("8f2c"),i=o.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},e197:function(e,t,o){},f0b9:function(e,t,o){"use strict";var n=o("e197"),i=o.n(n);i.a}},[["362a","common/runtime","common/vendor"]]]);