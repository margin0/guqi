{"version":3,"sources":["uni-app:///main.js","webpack:///D:/mywork/BPM/guqi/pages/OrderDetails/OrderDetails.vue?4270","webpack:///D:/mywork/BPM/guqi/pages/OrderDetails/OrderDetails.vue?739e","webpack:///D:/mywork/BPM/guqi/pages/OrderDetails/OrderDetails.vue?f9a6","webpack:///D:/mywork/BPM/guqi/pages/OrderDetails/OrderDetails.vue?470d","uni-app:///pages/OrderDetails/OrderDetails.vue","webpack:///D:/mywork/BPM/guqi/pages/OrderDetails/OrderDetails.vue?80b3","webpack:///D:/mywork/BPM/guqi/pages/OrderDetails/OrderDetails.vue?8647"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","orderType","visible","maskCloseAble","defaultValue","column","name","phone","city","area","ab","recipientName","code","phoneNumber","orderNo","orderAmount","from","detls","abList","fpList","commodityCode","fp","invoiceType","invoiceTitle","taxNumber","companyAddress","bankName","bankAccount","id","email","onlylook","components","cityPicker","onShow","onLoad","console","methods","queryOrderInfoByOrderNo","that","uni","title","icon","selectOption","getAdss","userOpenid","res","goAb","url","goFplist","getFp","openCp","confirm","cancel","open","fpopen","close","fpclose","save","province","district","detailedAddress","fpsave","bindAddressForOrder","addressId","duration","clearTimeout","openInvoice","invoiceId","emailAddress","go","content","confirmColor","success","status","goIndex"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACsC;;;AAGjG;AAC2K;AAC3K,gBAAgB,6KAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpDA;AAAA;AAAA;AAAA;AAAipB,CAAgB,snBAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACiUrqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAKA;EACAC;IACA;MACAC;MAAA;MACA;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;QAAA;QACAC;QACAC;QACAC;QACA;MACA;;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAZ;QAAA;QACAa;QAAA;QACAC;QAAA;QACAC;QACAC;MACA;MACAN;MAAA;MACAO;IACA;EACA;EACAC;IACAC;EACA;EACAC;IACA;EACA;EACAC;IACAC;IACA;IACA;IACA;IACA;IACA;IACA;EAEA;EACAC;IACAC;MAAA;MACA;MACA;QACAvB;MACA;QACAwB;QACA;QACA;QACA;UACAA;UACA;UACAA;QACA;QACA;UACAA;UACA;UACAA;QACA;MAEA;QACAC;UACAC;UACAC;QACA;MACA;IACA;IACAC;MACA;MACAJ;IACA;IACA;IACAK;MACA;MACA;MACA;MACA;MACA;QACAC;MACA;QACAC;QACA;QACAP;QACA;QACA;UACAA;QACA;MACA;QACAC;UACAC;UACAC;QACA;MACA;IACA;IACA;IACAK;MACAP;QACAQ;MACA;IACA;IACA;IACAC;MACAT;QACAQ;MACA;IACA;IACA;IACAE;MACA;MACA;MACA;MACA;MACA;QACAL;MACA;QACAC;QACA;QACAP;QACA;QACA;UACAA;QACA;QACA;QACA;UACAA;QACA;MACA;QACAC;UACAC;UACAC;QACA;MACA;IACA;IACA;IACAS;MACA;IACA;IACAC;MACAhB;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAiB;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;UACAlB;YAAAC;YAAAC;UAAA;UACA;QACA;UACAF;YAAAC;YAAAC;UAAA;UACA;QACA;UACAF;YAAAC;YAAAC;UAAA;UACA;QACA;UACAF;YAAAC;YAAAC;UAAA;UACA;QACA;QACA;QACA;AACA;AACA;AACA;AACA;QACA;UACAG;UACAjC;UACAE;UACA6C;UACAlD;UACAmD;UACAC;QACA;UACAtB;QACA;UACAC;YACAC;YACAC;UACA;QACA;MACA;QACA;QACAH;MACA;IAEA;IACA;AACA;AACA;IACAuB;MACA;MACA;MACA;MACA;MACA;MACA;QACA;UACAtB;YAAAC;YAAAC;UAAA;UACA;QACA;QACAH;MACA;QACA;QACA;QACA;UACAC;YAAAC;YAAAC;UAAA;UACA;QACA;UACAF;YAAAC;YAAAC;UAAA;UACA;QACA;UACAF;YAAAC;YAAAC;UAAA;UACA;QACA;QAEA;UACA;YACAG;YACAtB;YAAA;YACAC;YAAA;YACAC;YAAA;YACAC;YAAA;YACAZ;YAAA;YACAa;YAAA;YACAC;UACA;YACAW;UACA;YACAC;cACAC;cACAC;YACA;UACA;QACA;UACA;UACA;YACAG;YACAtB;YAAA;YACAC;YAAA;YACAC;YAAA;YACAC;YAAA;YACAZ;YAAA;YACAa;YAAA;YACAC;YAAA;YACAC;UACA;YACAU;UACA;YACAC;cACAC;cACAC;YACA;UACA;QACA;MACA;IACA;IACA;IACAqB;MACA;MACA;QACAhD;QACAiD;MACA;QACAxB;UACAC;UACAwB;QACA;QACA;UACA;UACA;UACA;UACA1B;UACAA;UACA2B;QACA;MACA;QACA1B;UACAC;UACAC;QACA;MACA;IAEA;IACA;IACAyB;MACA;MACA;MACA;MACA;QACApD;QACAqD;QACAC;QACA7C;QACAqB;MACA;QACAL;UACAC;UACAwB;QACA;QACA;UACA1B;UACAA;UACA2B;UACA;UACA;UACA;UACA;QACA;MACA;QACA1B;UACAC;UACAC;QACA;MACA;IAEA;IACA4B;MACA;MACA;QACA9B;UACAC;UACA8B;UACAC;UAAA;UACAC;YACA;cACA;cACA;cACA;cACA;gBACA1D;gBACA2D;cACA;gBACAlC;kBACAC;kBACAwB;gBACA;gBACA;kBACA1B;kBACA;kBACA;kBACA;kBACA2B;gBACA;cACA;gBACA1B;kBACAC;kBACAC;gBACA;cACA;YAEA;UACA;QACA;MACA;QACAF;UACAQ;QACA;MACA;QACA;AACA;AACA;AACA;QACA;UACA;UACA;QACA;MACA;QACA;MACA;QACAR;UACAQ;QACA;MACA;IACA;IAEA2B;MACA;MACA;MAEA;QACA9B;QACAxB;MACA;MACAmB;MACAA;QACAQ;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzvBA;AAAA;AAAA;AAAA;AAAovC,CAAgB,6nCAAG,EAAC,C;;;;;;;;;;;ACAxwC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/OrderDetails/OrderDetails.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/OrderDetails/OrderDetails.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./OrderDetails.vue?vue&type=template&id=1a744c86&scoped=true&\"\nvar renderjs\nimport script from \"./OrderDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderDetails.vue?vue&type=style&index=0&id=1a744c86&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a744c86\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/OrderDetails/OrderDetails.vue\"\nexport default component.exports","export * from \"-!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./OrderDetails.vue?vue&type=template&id=1a744c86&scoped=true&\"","var components\ntry {\n  components = {\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.abList.length\n  var g1 =\n    _vm.fp.invoiceType == \"单位\"\n      ? _vm.fpList.length > 0 && _vm.fp.invoiceType == \"单位\"\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./OrderDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./OrderDetails.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page\">\r\n\t\t<!-- 订单状态 -->\r\n\t\t<!-- 订单tab   全部  0\r\n\t\torderType  待付款1 待发货\t2\t待收货3 已完成4 已取消5\t -->\r\n\t\t<view class=\"order-status\">\r\n\t\t\t<view class=\"status\">\r\n\t\t\t\t<image :src=\"\r\n\t\t\t\t        detls.status == 0 ? '' :\r\n\t\t\t\t         detls.status == '待付款' ? '../../static/order/dfk-w.png' :\r\n\t\t\t\t         detls.status == '待发货' ? '../../static/order/dfh-w.png' :\r\n\t\t\t\t         detls.status == '待收货' ? '../../static/order/dsh-w.png' :\r\n\t\t\t\t         detls.status == '已完成' ? '../../static/order/ysh-w.png' :\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t detls.status  == '退款失败' ? '../../static/order/yqx-w.png' :\r\n\t\t\t\t\t\t detls.status  == '退款中' ? '../../static/order/yqx-w.png' :\r\n\t\t\t\t\t\t detls.status  == '已退款' ? '../../static/order/yqx-w.png' :\r\n\t\t\t\t         detls.status == '已取消' ? '../../static/order/yqx-w.png' : ''\r\n\t\t\t\t\"mode=\"\"  style=\"height:70rpx;width:70rpx;\"></image>\r\n\t\t\t\t<!-- <text class=\"iconfont icon-zhuyi\"></text> -->\r\n\t\t\t\t<text class=\"desc\">\r\n\t\t\t\t\t<text>{{detls.status}}</text>\r\n\t\t\t\t\t<text class=\"oths\" v-if=\"detls.status  == '已退款'\">款项已原路退回</text>\r\n\t\t\t\t</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 收货地址 -->\r\n\t\t<view class=\"shipping-address sw\"  v-if=\"(detls.isAddress=='是'&&detls.status=='待发货')||detls.status=='待收货'\">\r\n\t\t\t<view class=\"name-phone\">\r\n\t\t\t\t<text class=\"iconfont icon-dingwei\"></text>\r\n\t\t\t\t<text>{{detls.recipientName}}</text>\r\n\t\t\t\t<text>{{detls.phoneNumber}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"address\">\r\n\t\t\t\t<text>{{detls.address}}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 快递信息   -->\r\n\t\t<view class=\"order-info sw\"  v-if=\"detls.status == '待收货'\">\r\n\t\t\t<view class=\"info-list\">\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<view class=\"title\">快递公司</view>\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t<text>{{detls.expressCompany}}</text>\r\n\t\t\t\t\t\t<!-- <text class=\"btn\" @click=\"copy\">复制</text> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<view class=\"title\">快递单号</view>\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t<text>{{detls.trackingNumber}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 取货方式   -->\r\n\t\t<view class=\"order-info sw\" v-if=\"detls.status == '已完成'\">\r\n\t\t\t<view class=\"info-list\">\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<view class=\"title\">取货方式</view>\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t<text>{{detls.pickupMethod}}</text>\r\n\t\t\t\t\t\t<!-- <text class=\"btn\" @click=\"copy\">复制</text> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 订单商品 -->\r\n\t\t<view class=\"order-goods sw\">\r\n\t\t\t<view class=\"goods-list\">\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<view class=\"thumb\">\r\n\t\t\t\t\t\t<image :src=\"detls.productImage\" mode=\"\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t<text class=\"one-omit\">{{detls.productName}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- <view class=\"num-size\">\r\n\t\t\t\t\t\t\t<text>数量：88</text>\r\n\t\t\t\t\t\t\t<text>颜色</text>\r\n\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t<view class=\"price\">\r\n\t\t\t\t\t\t\t<text>￥{{detls.memberPrice}}</text>\r\n\t\t\t\t\t\t\t<text class=\"num\"><text>×</text>1</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"tk\" v-if='0'>\r\n\t\t\t\t\t\t\t<text>退款成功</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"order-btn\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<text style=\"margin-right: 20rpx;\">共<text class=\"red\">{{detls.quantity}}</text>件商品</text>\r\n\t\t\t\t\t\t\t\t<text>合计：¥ <text class=\"red\" style=\"margin-left:10rpx;\">{{detls.orderAmount}}</text></text>\r\n\t\t\t\t\t\t\t</view> \r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t<!-- 订单信息 -->\r\n\t\t<view class=\"order-info sw\">\r\n\t\t\t<view class=\"info-list\">\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<view class=\"title\">订单编号</view>\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t<text>{{orderNo}}</text>\r\n\t\t\t\t\t\t<!-- <text class=\"btn\" @click=\"copy\">复制</text> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<view class=\"title\">下单时间</view>\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t<text>{{detls.createDate}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"list\" v-if=\"orderType != '待付款'\">\r\n\t\t\t\t\t<view class=\"title\">支付方式</view>\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t<text>{{detls.paymentMethod}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"list\" v-if=\"orderType != '待付款'\">\r\n\t\t\t\t\t<view class=\"title\">付款时间</view>\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t<text>{{detls.paymentTime}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 底部按钮 -->\r\n\t\t<view class=\"footer-btn\" v-if=\"detls.status == '已完成' ||detls.status == '待收货' ||detls.status == '待付款' || (detls.status == '待发货' && detls.isAddress == '否')\">\r\n\t\t\t<view class=\"del\">\r\n\t\t\t\t<!-- <text>删除订单</text> -->\r\n\t\t\t</view> \r\n\t\t\t<!-- v-if=\"orderType === '待付款' || orderType === '待发货' && isAddress !== '是'\" isInvoice-->\r\n\t\t\t<view class=\"btn\">\r\n\t\t\t\t<!--  orderType  待付款1 待发货\t2\t待收货3 已完成4 已取消5 -->\r\n\t\t\t\t<text class=\"\"   @click=\"go('开发票')\" v-if=\"(detls.status == '待收货' || detls.status == '已完成') && detls.isInvoice == '否'\">开发票</text>\r\n\t\t\t\t<text class=\"\"   @click=\"go('查看发票')\" v-if=\"(detls.status == '待收货' || detls.status == '已完成') && detls.isInvoice == '是'\">查看发票</text>\r\n\t\t\t\t<text class=\"action\"   @click=\"goIndex()\" v-if=\"detls.status=='已完成'\">再来一单</text>\r\n\t\t\t\t<text class=\"action\"  @click=\"go('确认收货')\" v-if=\"detls.status=='待收货'\">确认收货</text>\r\n\t\t\t\t<text class=\"action\"  @click=\"go('收货地址')\" v-if=\"detls.status=='待发货'&&detls.isAddress=='否'\">收货地址</text>\r\n\t\t\t\t<text class=\"action\" @click=\"go('去付款')\" v-if=\"detls.status=='待付款'\">去付款</text>\r\n\t\t\t\t<!-- <text @click=\"phonecall\">联系客服</text> -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- //填写地址 -->\r\n\t\t<uni-popup ref=\"popup\"  border-radius=\"10px 10px 0 0\">\r\n\t\t\t<view class=\"popupBox\" style=\"padding-bottom: 45rpx;\">\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"title\"><text class=\"name\">收货地址</text><text class=\"close\" @click=\"close\">×</text></view>\r\n\t\t\t\t<view class=\"info\" v-if=\"abList.length=='0'\">\r\n\t\t\t\t\t<view class=\"address-input\">\r\n\t\t\t\t\t\t<view class=\"list-input\" style=\"border: unset;height: 50rpx;\"></view>\r\n\t\t\t\t\t\t<view class=\"list-input\">\r\n\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t<text>收货人</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"请填写收货人姓名\" v-model=\"name\">\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"list-input\">\r\n\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t<text>手机号</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t<input type=\"tel\" placeholder=\"请填写收货人手机号\" v-model=\"phone\">\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"list-input\" @click=\"openCp\">\r\n\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t<text>所在地区</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" v-model=\"city\" placeholder=\"请选择所在地区\" readonly style=\"position: relative;z-index: 1;pointer-events: none;\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"right\" size=\"12\" style=\"float: right;\"></uni-icons>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"list-textarea\">\r\n\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t<text>详细地址</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t<textarea type=\"tel\" placeholder=\"请填写详细地址\"  v-model=\"area\"/>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 再次 -->\r\n\t\t\t\t<view class=\"info\" v-else>\r\n\t\t\t\t\t<view class=\"address-input\">\r\n\t\t\t\t\t\t<view class=\"list-input\" style=\"border: unset;height: 50rpx;\"></view>\r\n\t\t\t\t\t\t<view class=\"box\">\r\n\t\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t\t\t<text style=\"font-weight: bold;\">{{ab.recipientName}}</text><text style=\"margin-left: 20rpx;\">{{ab.phoneNumber}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"area\">\r\n\t\t\t\t\t\t\t\t\t<text>{{ab.province}}{{ab.city}}{{ab.district}}{{ab.detailedAddress}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"right\" @click=\"goAb\">\r\n\t\t\t\t\t\t\t\t<text>地址簿</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view  @click=\"save\" class=\"save\">保存</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</uni-popup>\r\n\t\t<cityPicker :column=\"column\" :default-value=\"defaultValue\" :mask-close-able=\"maskCloseAble\" @confirm=\"confirm\" @cancel=\"cancel\" :visible=\"visible\"/>\r\n\t\t<!-- 开发票 \r\n\t\tinvoiceType: '单位',//\"发票类型(个人/单位)\",\r\n\t\tinvoiceTitle: '',//\"发票抬头\",\r\n\t\ttaxNumber: '',//\"税号(单位必填)\",\r\n\t\tcompanyAddress: '',//\"公司地址(单位必填)\",\r\n\t\tphoneNumber: '',//\"电话号码(单位必填)\",\r\n\t\tbankName: '',//\"开户银行(单位必填)\",\r\n\t\tbankAccount: '',//\"银行账号(单位必填)\"\r\n\t\t-->\r\n\t\t<uni-popup ref=\"popup1\"  border-radius=\"10px 10px 0 0\">\r\n\t\t\t<view class=\"popupBox\">\r\n\t\t\t\t<view class=\"title\"><text class=\"name\">发票</text><text class=\"close\" @click=\"fpclose\">×</text></view>\r\n\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t<view class=\"address-input\">\r\n\t\t\t\t\t\t<view class=\"list-input\" style=\"border: unset;height: 50rpx;\"></view>\r\n\t\t\t\t\t\t<view class=\"toptitle\">\r\n\t\t\t\t\t\t\t发票信息\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"list-input\">\r\n\t\t\t\t\t\t\t<view class=\"option-group\">\r\n\t\t\t\t\t\t\t  <text class=\"option\" @click=\"selectOption('单位')\" :class=\"{ 'selected': fp.invoiceType == '单位' }\">单位</text>\r\n\t\t\t\t\t\t\t  <text class=\"option\" @click=\"selectOption('个人')\" :class=\"{ 'selected': fp.invoiceType == '个人' }\">个人</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"list-input\"  v-if=\"fp.invoiceType=='单位'\">\r\n\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t<text class=\"bx\">发票抬头</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"请填写发票抬头\" v-model=\"fp.invoiceTitle\">\r\n\t\t\t\t\t\t\t\t<text class=\"ttb\" @click=\"goFplist\" v-if=\"fpList.length>0&&fp.invoiceType == '单位'\">抬头簿</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"list-input\"  v-if=\"fp.invoiceType=='个人'\">\r\n\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t<text class=\"bx\">发票抬头</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"请填写发票抬头\" v-model=\"invoiceTitle\">\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view  v-if=\"fp.invoiceType=='单位'\">\r\n\t\t\t\t\t\t\t<view class=\"list-input\">\r\n\t\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"bx\">税&nbsp;&nbsp;号</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"tel\" placeholder=\"请填写税号\" v-model=\"fp.taxNumber\">\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"list-input\">\r\n\t\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t\t<text>公司地址</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"tel\" placeholder=\"请填写公司地址\" v-model=\"fp.companyAddress\">\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"list-input\">\r\n\t\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t\t<text>单位电话</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"tel\" placeholder=\"请填写单位电话\" v-model=\"fp.phoneNumber\">\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"list-input\">\r\n\t\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t\t<text>开户银行</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"tel\" placeholder=\"请填写开户银行\" v-model=\"fp.bankName\">\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"list-input\">\r\n\t\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t\t<text>银行账号</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"tel\" placeholder=\"请填写银行账号\" v-model=\"fp.bankAccount\">\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"toptitle\" style=\"border: unset;margin-top: 30rpx;\">\r\n\t\t\t\t\t\t\t收票人信息\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"list-input\">\r\n\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t<text class=\"bx\">接收邮箱</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t<input type=\"tel\" placeholder=\"请填写接收邮箱\" v-model=\"fp.email\">\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view  @click=\"fpsave\" class=\"save\" >保存</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tqueryUserAddressList,factorydirect_order,queryOrderInfoByOrderNo,bindAddressForOrder,createUserAddress,updateUserAddress,updateOrderStatusForUser,updateUserInvoice,createUserInvoice,queryUserInvoiceList,openInvoice\r\n\t} from '@/api/api.js';\r\n\t\r\n   import cityPicker from '@/uni_modules/piaoyi-cityPicker/components/piaoyi-cityPicker/piaoyi-cityPicker'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\torderType:'',//订单状态：待付款、待发货、待收货、已完成、已取消\r\n\t\t\t\t//isFirst:1,//是否首次填写地址，根据用户的地址列表有无数据，默认第一条\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tmaskCloseAble: true,\r\n\t\t\t\tdefaultValue: '110101',\r\n\t\t\t\t// defaultValue: ['河北省','唐山市','丰南区'],\r\n\t\t\t\tcolumn: 3,\r\n\t\t\t\tname:'',//收货人姓名\r\n\t\t\t\tphone:'',//收货人手机\r\n\t\t\t\tcity:'',//收货人地区\r\n\t\t\t\tarea:'',//收货人详细的地址\r\n\t\t\t\t\r\n\t\t\t\tab:{//地址簿\r\n\t\t\t\t\trecipientName:'',\r\n\t\t\t\t\tcode:'',\r\n\t\t\t\t\tphoneNumber:'',\r\n\t\t\t\t\t//area:'',//详细的地址\r\n\t\t\t\t},\r\n\t\t\t\torderNo:'',\r\n\t\t\t\torderAmount:'',\r\n\t\t\t\tfrom:'',//laizi\r\n\t\t\t\tdetls:null,\r\n\t\t\t\tabList:[],\r\n\t\t\t\tfpList:[],\r\n\t\t\t\tcommodityCode:'',\r\n\t\t\t\tfp:{\r\n\t\t\t\t  invoiceType: '单位',//\"发票类型(个人/单位)\",\r\n\t\t\t\t  invoiceTitle: '',//\"发票抬头\",\r\n\t\t\t\t  taxNumber: '',//\"税号(单位必填)\",\r\n\t\t\t\t  companyAddress: '',//\"公司地址(单位必填)\",\r\n\t\t\t\t  phoneNumber: '',//\"电话号码(单位必填)\",\r\n\t\t\t\t  bankName: '',//\"开户银行(单位必填)\",\r\n\t\t\t\t  bankAccount: '',//\"银行账号(单位必填)\"\r\n\t\t\t\t  id:'',\r\n\t\t\t\t  email:''\r\n\t\t\t\t},\r\n\t\t\t\tinvoiceTitle:'',//个人 发票抬头\r\n\t\t\t\tonlylook:1,\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tcityPicker\r\n\t\t},\r\n\t\tonShow(){\r\n\t\t\tthis.queryOrderInfoByOrderNo()\r\n\t\t},\r\n\t\tonLoad(option){\r\n\t\t\tconsole.log(option); //打印出上个页面传递的参数。\r\n\t\t\tthis.orderType = option.orderType;\r\n\t\t\tthis.orderNo = option.orderNo;\r\n\t\t\tthis.from= option.from;\r\n\t\t\tthis.abInfo= option.abInfo;\r\n\t\t\tthis.fpInfo= option.fpInfo;\r\n\t\t\tthis.onlylook = option.onlylook;\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tqueryOrderInfoByOrderNo(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tqueryOrderInfoByOrderNo({\r\n\t\t\t\t\torderNo: that.orderNo,\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tthat.detls = res;\r\n\t\t\t\t\tthis.orderType = res.status;\r\n\t\t\t\t\t//根据不同状态 ，控制地址以及发票的弹出框\r\n\t\t\t\t\tif(res.isAddress=='否'&&res.status=='待发货'&&that.onlylook==0){\r\n\t\t\t\t\t\tthat.open();\r\n\t\t\t\t\t\t//判断 是否从地址页面返回，是--取值来自于地址页面；否--取值来自地址簿接口第一条数据\r\n\t\t\t\t\t\tthat.getAdss(that.from,that.abInfo);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif((res.status == '待收货'||res.status == '已完成')&& res.isInvoice == '否'&&that.onlylook==0){\r\n\t\t\t\t\t\tthat.fpopen();\r\n\t\t\t\t\t\t//判断 是否从发票列表页面返回，是--取值来自于发票列表页面；否--取值来自发票列表接口第一条数据\r\n\t\t\t\t\t\tthat.getFp(that.from,that.fpInfo);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: err.data.msg||'queryOrderInfoByOrderNo接口异常,请稍后再试',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tselectOption(option) {\r\n\t\t\t  let that = this;\r\n\t\t\t  that.fp.invoiceType = option;\r\n\t\t\t},\r\n\t\t\t//获取地址列表\r\n\t\t\tgetAdss(from,abInfo){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet basicData = uni.getStorageSync('basicData');\r\n\t\t\t\tlet data = JSON.parse(basicData);\r\n\t\t\t\t//queryOrderInfoByOrderNo\r\n\t\t\t\tqueryUserAddressList({\r\n\t\t\t\t\tuserOpenid: data.userOpenid,\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tres.length>0?that.ab  = res[0]:console.log(\"\")\r\n\t\t\t\t\t//取地址簿第一条数据\r\n\t\t\t\t\tthat.abList  = res;\t//取地址簿第一条数据\r\n\t\t\t\t\t//判断 是否从地址页面返回，是--取值来自于地址页面；否--取值来自地址簿接口第一条数据\r\n\t\t\t\t\tif(from==\"AddressList\"&&abInfo){\r\n\t\t\t\t\t\tthat.ab = JSON.parse(abInfo);\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: err.data.msg||'queryUserAddressList接口异常,请稍后再试',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//去地址簿\r\n\t\t\tgoAb(){\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: '/pages/AddressList/AddressList?from=orderDetails&orderType='+this.orderType+'&orderNo='+this.detls.orderNo\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//去抬头簿\r\n\t\t\tgoFplist(){\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: '/pages/InvoiceList/InvoiceList?from=orderDetails&orderType='+this.orderType+'&orderNo='+this.detls.orderNo\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获发票列表\r\n\t\t\tgetFp(from,fpInfo){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet basicData = uni.getStorageSync('basicData');\r\n\t\t\t\tlet data = JSON.parse(basicData);\r\n\t\t\t\t//queryOrderInfoByOrderNo\r\n\t\t\t\tqueryUserInvoiceList({\r\n\t\t\t\t\tuserOpenid: data.userOpenid,\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tres.length>0?that.fp  = res[0]:console.log('');\r\n\t\t\t\t\t//取抬头簿第一条数据\r\n\t\t\t\t\tthat.fpList  = res;\t//取抬头簿第一条数据\r\n\t\t\t\t\t//判断 是否从抬头簿页面返回，是--取值来自于抬头簿页面；否--取值来自抬头簿接口第一条数据\r\n\t\t\t\t\tif(from==\"InvoiceList\"&&fpInfo){\r\n\t\t\t\t\t\tthat.fp = JSON.parse(fpInfo);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//获取用户历史邮箱信息\r\n\t\t\t\t\tif(uni.getStorageSync('emailAddress')){\r\n\t\t\t\t\t\tthat.fp.email = uni.getStorageSync('emailAddress')\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: err.data.msg||'queryUserInvoiceList接口异常,请稍后再试',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//下拉选择省区县\r\n\t\t\topenCp () {\r\n                this.visible = true\r\n            },\r\n            confirm (val) {\r\n                console.log(val)\r\n\t\t\t\tthis.city = val.name;\r\n\t\t\t\t//{code: \"110101\", name: \"北京市市辖区东城区\", provinceName: \"北京市\", cityName: \"市辖区\", areaName: \"东城区\"}\r\n\t\t\t\tthis.provinceName = val.provinceName;\r\n\t\t\t\tthis.cityName = val.cityName;\r\n\t\t\t\tthis.areaName = val.areaName;\r\n                this.visible = false;\r\n            },\r\n            cancel () {\r\n                this.visible = false\r\n            },\r\n\t\t\topen() {\r\n\t\t\t\tthis.$refs.popup.open('bottom')\r\n\t\t\t},\r\n\t\t\tfpopen() {\r\n\t\t\t\tthis.$refs.popup1.open('bottom')\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.$refs.popup.close()\r\n\t\t\t},\r\n\t\t\tfpclose() {\r\n\t\t\t\tthis.$refs.popup1.close()\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 保存地址\r\n\t\t\t */\r\n\t\t\tsave(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet basicData = uni.getStorageSync('basicData');\r\n\t\t\t\tlet data = JSON.parse(basicData);\r\n\t\t\t\tconst regex_phone = /^1[3-9]\\d{9}$/;\r\n\t\t\t\t//判断 1、用户是否首次填写，首次填写保存后先调用保存地址接口后，再调用绑定订单接口\r\n\t\t\t\t//     2、非首次填写，直接取当前选择的地址id即可\r\n\t\t\t\tif(this.abList.length==\"0\"){\r\n\t\t\t\t\tif(this.name==''){\r\n\t\t\t\t\t\tuni.showToast({title: '请输入收货人姓名',icon: 'none'});\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}else if(this.phone==''||!regex_phone.test(this.phone)){\r\n\t\t\t\t\t\tuni.showToast({title: '请输入正确的手机号',icon: 'none'});\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}else if(this.city==''){\r\n\t\t\t\t\t\tuni.showToast({title: '请选择所在地区',icon: 'none'});\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}else if(this.area==''){\r\n\t\t\t\t\t\tuni.showToast({title: '请输入详细地址',icon: 'none'});\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//name phone city area\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tthis.provinceName = val.provinceName;\r\n\t\t\t\t\tthis.cityName = val.cityName;\r\n\t\t\t\t\tthis.areaName = val.areaName;\r\n\t\t\t\t\t*/ \r\n\t\t\t\t\tcreateUserAddress({\r\n\t\t\t\t\t\tuserOpenid: data.userOpenid,\r\n\t\t\t\t\t\trecipientName:that.name,\r\n\t\t\t\t\t\tphoneNumber:that.phone,\r\n\t\t\t\t\t\tprovince:that.provinceName,\r\n\t\t\t\t\t\tcity:that.cityName,\r\n\t\t\t\t\t\tdistrict:that.areaName,\r\n\t\t\t\t\t\tdetailedAddress:that.area\r\n\t\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t\tthat.bindAddressForOrder(res);\r\n\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: err.data.msg||'createUserAddress接口异常,请稍后再试',\r\n\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//非首次填写地址，\r\n\t\t\t\t\tthat.bindAddressForOrder(that.ab.id);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 保存开票信息\r\n\t\t\t * \t\t\t */\r\n\t\t\tfpsave(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet basicData = uni.getStorageSync('basicData');\r\n\t\t\t\tlet data = JSON.parse(basicData);\r\n\t\t\t\tconst regex_email = /\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/;\r\n\t\t\t\t//保存时，单位和个人分别判断。个人直接调用开票接口。只传抬头，id置空，\r\n\t\t\t\tif(that.fp.invoiceType=='个人'){\r\n\t\t\t\t\tif(that.invoiceTitle ==''){\r\n\t\t\t\t\t\tuni.showToast({title: '请输入发票抬头',icon: 'none'});\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.openInvoice('',that.fp.email,that.invoiceTitle);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//判断 1、首次填写保存后先调用保存接口后createUserInvoice，再调用绑定订单接口openInvoice\r\n\t\t\t\t\t//     2、非首次填写，直接取当前选择的发票记录的id即可\r\n\t\t\t\t\tif(that.fp.invoiceTitle ==''){\r\n\t\t\t\t\t\tuni.showToast({title: '请输入发票抬头',icon: 'none'});\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}else if(that.fp.taxNumber==''&&that.fp.invoiceType=='单位'){\r\n\t\t\t\t\t\tuni.showToast({title: '请输入正确的税号',icon: 'none'});\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}else if(that.fp.email==''||!regex_email.test(that.fp.email)){\r\n\t\t\t\t\t\tuni.showToast({title: '请输入正确的邮箱',icon: 'none'});\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(that.fpList.length==\"0\"){\r\n\t\t\t\t\t\tcreateUserInvoice({\r\n\t\t\t\t\t\t\tuserOpenid: data.userOpenid,\r\n\t\t\t\t\t\t\tinvoiceType:that.fp.invoiceType,//\"发票类型(个人/单位)\",\r\n\t\t\t\t\t\t\tinvoiceTitle: that.fp.invoiceTitle,//\"发票抬头\",\r\n\t\t\t\t\t\t\ttaxNumber: that.fp.taxNumber,//\"税号(单位必填)\",\r\n\t\t\t\t\t\t\tcompanyAddress:that.fp.companyAddress,//\"公司地址(单位必填)\",\r\n\t\t\t\t\t\t\tphoneNumber: that.fp.phoneNumber,//\"电话号码(单位必填)\",\r\n\t\t\t\t\t\t\tbankName: that.fp.bankName,//\"开户银行(单位必填)\",\r\n\t\t\t\t\t\t\tbankAccount: that.fp.bankAccount,//\"银行账号(单位必填)\"\r\n\t\t\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t\t\tthat.openInvoice(res,that.fp.email,that.fp.invoiceTitle);\r\n\t\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: err.data.msg||'createUserInvoice接口异常,请稍后再试',\r\n\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//非首次填写发票，先调用发票的更新接口\r\n\t\t\t\t\t\tupdateUserInvoice({\r\n\t\t\t\t\t\t\tuserOpenid: data.userOpenid,\r\n\t\t\t\t\t\t\tinvoiceType:that.fp.invoiceType,//\"发票类型(个人/单位)\",\r\n\t\t\t\t\t\t\tinvoiceTitle: that.fp.invoiceTitle,//\"发票抬头\",\r\n\t\t\t\t\t\t\ttaxNumber: that.fp.taxNumber,//\"税号(单位必填)\",\r\n\t\t\t\t\t\t\tcompanyAddress:that.fp.companyAddress,//\"公司地址(单位必填)\",\r\n\t\t\t\t\t\t\tphoneNumber: that.fp.phoneNumber,//\"电话号码(单位必填)\",\r\n\t\t\t\t\t\t\tbankName: that.fp.bankName,//\"开户银行(单位必填)\",\r\n\t\t\t\t\t\t\tbankAccount: that.fp.bankAccount,//\"银行账号(单位必填)\"\r\n\t\t\t\t\t\t\tid:that.fp.id\r\n\t\t\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t\t\tthat.openInvoice(that.fp.id,that.fp.email,that.fp.invoiceTitle);\r\n\t\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: err.data.msg||'updateUserInvoice接口异常,请稍后再试',\r\n\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//地址绑定订单 orderNo addressId\r\n\t\t\tbindAddressForOrder(id) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tbindAddressForOrder({\r\n\t\t\t\t\torderNo: that.orderNo,\r\n\t\t\t\t\taddressId:id,\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '保存成功',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet timer = setTimeout(() =>{\r\n\t\t\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t\t\t// \turl: '/pages/MyOrderList/MyOrderList?orderType=待发货'\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t\tthat.close()\r\n\t\t\t\t\t\tthat.queryOrderInfoByOrderNo()\r\n\t\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t\t},1500)\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: err.data.msg||'bindAddressForOrder接口异常,请稍后再试',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//发票绑定订单 orderNo invoiceId\r\n\t\t\topenInvoice(id,emailAddress,invoiceTitle) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet basicData = uni.getStorageSync('basicData');\r\n\t\t\t\tlet data = JSON.parse(basicData);\r\n\t\t\t\topenInvoice({\r\n\t\t\t\t\torderNo: that.orderNo,\r\n\t\t\t\t\tinvoiceId:id,\r\n\t\t\t\t\temailAddress:emailAddress,\r\n\t\t\t\t\tinvoiceTitle:invoiceTitle,\r\n\t\t\t\t\tuserOpenid: data.userOpenid\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '保存成功',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet timer = setTimeout(() =>{\r\n\t\t\t\t\t\tthat.fpclose();\r\n\t\t\t\t\t\tthat.queryOrderInfoByOrderNo()\r\n\t\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t\t\t// \turl: '/pages/MyOrderList/MyOrderList?orderType='+this.orderType\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t//clearTimeout(timer);\r\n\t\t\t\t\t},1500)\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: err.data.msg||'openInvoice接口异常,请稍后再试',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tgo(url){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif(url=='确认收货'&&this.orderNo){\t\t\t\t\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '',\r\n\t\t\t\t\t\tcontent: '是否确认收货？',\r\n\t\t\t\t\t\tconfirmColor:'#C0272C',//确定按钮颜色\r\n\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t//updateOrderStatusForUser orderNo status\r\n\t\t\t\t\t\t\t\tlet basicData = uni.getStorageSync('basicData');\r\n\t\t\t\t\t\t\t\tlet data = JSON.parse(basicData);\r\n\t\t\t\t\t\t\t\tupdateOrderStatusForUser({\r\n\t\t\t\t\t\t\t\t\torderNo: that.orderNo,\r\n\t\t\t\t\t\t\t\t\tstatus: '已完成',\r\n\t\t\t\t\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '确认收货成功',\r\n\t\t\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tlet timer = setTimeout(() =>{\r\n\t\t\t\t\t\t\t\t\t\tthat.queryOrderInfoByOrderNo()\r\n\t\t\t\t\t\t\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t// \turl: '/pages/MyOrderList/MyOrderList?orderType=已完成'\r\n\t\t\t\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t\t\t\t\t\t},1500)\r\n\t\t\t\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: err.data.msg||'updateOrderStatusForUser接口异常,请稍后再试',\r\n\t\t\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(url=='去付款'){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/CashierDesk/CashierDesk?orderAmount='+this.detls.orderAmount+'&orderNo='+this.detls.orderNo\r\n\t\t\t\t\t})\r\n\t\t\t\t}else if(url=='收货地址'){\r\n\t\t\t\t\t/*\r\n\t\t\t\t\torderType  待付款1 待发货\t2\t待收货3 已完成4 已取消5\r\n\t\t\t\t\t需要判断是否是首次填写地址或者是没填写地址的，直接弹出 填写收货地址；非首次带出默认地址\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tif(this.orderType=='待发货'){\r\n\t\t\t\t\t\tthis.open(); \r\n\t\t\t\t\t\tthis.getAdss(this.from,this.abInfo)\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(url=='开发票'){\r\n\t\t\t\t\tthis.fpopen();\r\n\t\t\t\t}else if(url=='查看发票'){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:\"/pages/InvoiceList/InvoiceDetails/InvoiceDetails?orderNo=\"+this.orderNo\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t,\r\n\t\t\tgoIndex(){\r\n\t\t\t\tlet oData = uni.getStorageSync('basicData');\r\n\t\t\t\tlet data = JSON.parse(oData);\r\n\t\t\t\r\n\t\t\t\tconst basicData = JSON.stringify({\r\n\t\t\t\t\tuserOpenid:data.userOpenid,\r\n\t\t\t\t\tcommodityCode:this.detls.commodityCode\r\n\t\t\t\t});\r\n\t\t\t\tuni.setStorageSync('basicData', basicData);\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:\"/pages/GoodsDetails/GoodsDetails?isBuy=1\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t@import 'OrderDetails.scss';\r\n</style>\r\n","import mod from \"-!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./OrderDetails.vue?vue&type=style&index=0&id=1a744c86&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./OrderDetails.vue?vue&type=style&index=0&id=1a744c86&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1740388556187\n      var cssReload = require(\"D:/安装软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}